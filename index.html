<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <title>Scott Schubert - JWT Auth</title>

    <meta
      name="description"
      content="Presentation on JWT Authentication for Single Page Applications"
    />
    <meta name="author" content="Scott Schubert" />

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="dist/reset.css" />
    <link rel="stylesheet" href="dist/reveal.css" />
    <link rel="stylesheet" href="dist/theme/black.css" />

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="plugin/highlight/monokai.css" />
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section>Securing a dotnet core API with a JWT</section>

        <section>
          <section>
            <h2>Authentication vs Authorization</h2>
          </section>
          <section>
            <table class="table">
              <thead>
                <tr>
                  <th><strong>Authentication</strong></th>
                  <th><strong>Authorization</strong></th>
                </tr>
              </thead>
              <tbody>
                <tr class="fragment fade-up">
                  <td>Determines whether users are who they claim to be</td>
                  <td>Determines what users can and cannot access</td>
                </tr>
                <tr class="fragment fade-up">
                  <td>
                    Challenges the user to validate credentials (for example,
                    through passwords)
                  </td>

                  <td>
                    Verifies whether access is allowed through policies and
                    rules
                  </td>
                </tr>
                <tr class="fragment fade-up">
                  <td>Usually done before authorization</td>
                  <td>Usually done after successful authentication</td>
                </tr>
              </tbody>
            </table>
            <small class="fragment">
              <a
                href="https://auth0.com/docs/get-started/identity-fundamentals/authentication-and-authorization"
                >source (Auth0)</a
              >
            </small>
          </section>
        </section>

        <section>
          <section>
            <h2>What is a JWT?</h2>
            <p class="fragment fade-up">
              A JWT is the acronym for JSON Web Token. A JWT can look something
              like this.
            </p>
            <pre>
				<code data-line-numbers="2,3|4,5|6,7|2-7">
					// The header
					eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.
					// The payload
					eyJpZCI6IjMiLCJuYmYiOjE2NTQyNjI1MzgsImV4cCI6MTY1NDI2MjU5OCwiaWF0IjoxNjU0MjYyNTM4fQ.
					// The signature
					fNcXKNiYCu5AI22vIjyBEnRAiYitrHhjdB9MnNpZGCk
				</code>
			</pre>
          </section>
          <section>
            <h2>What can be stored in a JWT?</h2>
            <p class="fragment">
              Pretty much anything! However, JWT's can be read by anyone, so
              keep the information non-personal.
            </p>
            <img class="fragment fade-up" data-src="./media/jwt-example.png" />
          </section>
          <section>
            <h2>If they can be read by anyone, how are they secure?</h2>
            <p class="fragment">
              The secret signature is what will keep your resources (e.g. API)
              secure!
            </p>
          </section>
        </section>

        <section>
          <section>How can a JWT be used to secure an API?</section>
          <section>Flow diagram of the process</section>
          <section>Refresh token</section>
        </section>

        <section>
          <section data-markdown>
            <textarea data-template>
				## Define the endpoints / routes for the web API
				  
				Controllers are the gateways into the web api for client
				applications via http requests.				  
			  </textarea
            >
          </section>
          <section data-markdown>
            <textarea data-template>
				  ## Two endpoints, one unprotected, one protected
				  ```c# [1-3|10-13]
				  [HttpGet]
				  [AllowAnonymous]
				  public async Task<IActionResult> Index()
				  {
					  return Ok(await _userService.GetAllAsync());
				  }
		  
				  [HttpGet]
				  [Authorize]
				  [Route("{id}", Name = "GetUserById")]
				  public async Task<IActionResult> GetUserById(int id)
				  {
					  var user = await _userService.GetByIdAsync(id);
		  
					  if (user == null)
					  {
						  return NotFound();
					  }
		  
					  return Ok(user);
				  }
				  ```
			  </textarea
            >
          </section>

          <section>
            <h2>User entity</h2>
          </section>

          <section>
            <h2>Services</h2>
          </section>
        </section>
      </div>
    </div>

    <script src="dist/reveal.js"></script>
    <script src="plugin/notes/notes.js"></script>
    <script src="plugin/markdown/markdown.js"></script>
    <script src="plugin/highlight/highlight.js"></script>
    <script>
      // More info about initialization & config:
      // - https://revealjs.com/initialization/
      // - https://revealjs.com/config/
      Reveal.initialize({
        hash: true,

        // Learn about plugins: https://revealjs.com/plugins/
        plugins: [RevealMarkdown, RevealHighlight, RevealNotes],
      });
    </script>
  </body>
</html>
